TVShow ***database = NULL;
int dbSize = 0;

int getInt();

int validLength(char *s);
int countShows();

TVShow **DBPrev(int row, int column, int size) {
if (--column >= 0) {return Pair{row, column};}
else if (--row >= 0) {return Pair{row, size-1};}
else {return Pair{-1, -1}}
}

TVShow **DBNext(int row, int column, int size) {
if (++column < size) {return Pair{row, column};}
else if (++row < size {return Pair{row, 0};}
else {return Pair{-1, -1}}
}

void shrinkDB() {
\\צמצום
(אלגוריתם לדחיסה לפני כיווץ הלוח הרחבת הלוח; במסד הנתונים, “תא פנוי" הוא מקום שבו המצביע לסדרה הוא ריק).
לתשומת לב: חיפוש התא הקודם ייעשה באמצעות  DBPrev, אבל עם גדלים שונים: איתור המקומות הפנויים יבוצע באמצעות DBNext(int row, int column, int size-1) ואיתור המקומות המלאים עם הגודל "הנכון". הוא מחזיר זוגות – צריך לקלוט את הפלט לזוג ולהשתמש באיבריו ככתובת.
מגדיר שני אינדקסים: מקום פנוי, מקום להעברה. שניהם מתחילים מסוף מסד הנתונים (כל אחד מסוף אחר).
לולאה ללא תנאי:
מחפש את התא הפנוי הקודם החל ממקום הפנוי הנוכחי ומפנה אליו את "מקום פנוי". (לולאה כל עוד מקום פנוי במסד הנתונים != NULL ולא יצאנו מהלוח מגדיל את האינדקס). אם "מקום פנוי" יצא מהלוח, שבור.
אינדקס מקום להעברה מעתיק את מקום פנוי. 
(לולאה נוספת: מחפשת אחורה אחר תאים תפוסים. ממשיכה כל עוד המוצבע של "מקום להעברה" == NULL ולא יצאנו מהלוח ומחפשת אחורה שוב).
אם "מקום להעברה" יצא מהלוח, שבור.
מעתיק את הכתובת שבתא "מקום להעברה" לתא "מקום פנוי". 
מאפס את המצביע שבמקום להעברה.

\\הקטנת מסד הנתונים
--dbSize
שחרר את TVShow[dbSize] (זו השורה שעכשיו גדולה מדי ואמורה להיות ריקה)
לולאה: כל עוד אינדקס = 0 קטן ממש מdbSize: הקצאה מחדש של TVShow[אינדקס] לגודל dbSize החדש
}
void expandDB() {
++dbSize
לולאה: אינדקס מאפס כל עוד הוא קטן ממש מ dbSize-1, קח את database[i] ותקצה לו מחדש מערך מצביעים לסדרות בגודל dbSize
הקצה זיכרון לשורה  database[dbSize], באותו גודל.

(אלגוריתם לדחיסה אחרי הרחבת הלוח; במסד הנתונים, “תא פנוי" הוא מקום שבו המצביע לסדרה הוא ריק).
להלן, חיפוש התא הבא ייעשה באמצעות  DBNext. הוא מחזיר זוגות – צריך לקלוט את הפלט לזוג ולהשתמש באיבריו ככתובת.
מגדיר שני אינדקסים: מקום פנוי, מקום להעברה. שניהם מתחילים מתחילת מסד הנתונים.
לולאה ללא תנאי (חיפושים באמצעות DBNext):
מחפש את התא הפנוי הבא החל ממקום הפנוי הנוכחי ומפנה אליו את "מקום פנוי". (לולאה כל עוד מקום פנוי במסד הנתונים != NULL ולא יצאנו מהלוח מגדיל את האינדקס). אם "מקום פנוי" יצא מהלוח, שבור.
אינדקס מקום להעברה מעתיק את מקום פנוי. 
(לולאה נוספת: כל עוד מקום להעברה במסד הנתונים != NULL ולא יצאנו מהלוח מגדיל את האינדקס).
אם "מקום להעברה" יצא מהלוח, שבור.
מעתיק את הכתובת שבתא "מקום להעברה" לתא "מקום פנוי". 
מאפס את המצביע שבמקום להעברה.
}


Season *findSeason(TVShow *show, char *name);
Episode *findEpisode(Season *season, char *name);

void addSeason();
void addEpisode();



void printEpisode();
void printShow();
void printArray();


char *getString() {
יהי משתנה “גודל מירבי”, הוא יאחסן את הגודל של הקלט (בהתחלה 16 תווים, יהיה DEFINE).
יהי מצביע (זמני – לבדוק שאחר כך הוא מועתק ללוח של התוכניות).
יוקצה לו זיכרון לפי "גודל מירבי"
בדיקת המצביע
יהי משתנה "גודל המחרוזת". 
יהי נתון משתמש. אני מקבל ממנו קלט.
תבוצע לולאה אינסופית של getchar. הלולאה קולטת כל פעם תו: 
בודקת אם הוא \n
אם כן הפונקציה מכניסה \0 לתא מחרוזת[גודל בפועל]
מחזירה את המצביע
אם לא, היא מגדילה באחד את נתון הגודל בפועל. 
בודקת אם הגודל בפועל+1 גדול מהגודל המרבי:
	אם כן, מכפילה את "גודל מירבי",
	מקצה זיכרון מחדש
	בודקת את המצביע
מכניסה למחרוזת את התו
}

void addShow(){
כאן אני מדפיס לו שאלה על השם של התוכנית (הכנסתי).

מקבל מחרוזת char *getString() למצביע זמני
אם findShow של המחרוזת != NULL:
, "Show already exists”, שחרור המחרוזת וחזרה. 
אם התא האחרון במערך database אינו ריק:
expandDB.
יוצר אובייקט TVShow (באמצעות מצביע זמני והקצאת זיכרון)
	מעתיק את המצביע של שם המחרוזת לתוך TVShow→name
מריץ  insertDB עם המחרוזת שלי שירוץ על המחרוזות, יסדר אותן ויכניס את המצביע שלי במקום הנכון לי את המצביע הנכון (תא שכבר דחפנו ממנו והלאה את כל המחרוזות הבאות)
}

TVShow *findShow(char *name) {
עובר על כל המאגר (עם הזהירות הנדרשת לא לגלוש מגודל מסד הנתונים)
משווה כל מחרוזת עם המחרוזת הנתונה. אם קודם מגיע החוצה מהמאגר או מגיע למצביע NULL, מחזיר NULL. אם מגיע למצב שבו השוואת המחרוזות נותנת 0 (שוויון), מחזיר מצביע לאותו מקום (כלומר מצביע למצביע).
}


void injectShow(char *showName, TVShow *insertShow) {
\\לשנות: להכניס אליו את המצביע לאובייקט הסדרה החדש ולתת לו לשים את האובייקט במקום. דורש לשנות קצת את הסדר בסוף  addShow
רץ על המצביעים במסד הנתונים (כאן צריך לבדוק שאיני גולש מגודל מסד הנתונים). 
אם המצביע NULL, מעתיק את את המצביע החדש למצביע הזה (זה מקרה שבו הגעתי לסוף הרשימה)
	משווה את המחרוזת הנתונה לכל אחד מהם.
אם מתקבל שהמחרוזת גדולה יותר, ממשיך
\\ הערה על זה שהמקרה שבו המחרוזת שווה כבר נבחן
אם מתקבל שהמחרוזת קטנה יותר, שומר את כתובת המצביע הזה בערך שיוחזר בהמשך. 
שומר באיזה מצביע tmp את הכתובת שאליה מצביע המצביע הבא
מתחיל לדחוף מכאן את המחרוזות קדימה באמצעות לולאה:
מעתיק את הכתובת שאליה מצביע המצביע הנוכחי למצביע הבא
שומר את הכתובת שאליה מצביע המצביע שאחריו ← tmp
עצירה אם הכתובת הזו היא NULL
אם הגעתי לכאן, זה אומר שפיניתי מקום. מחזיר את כתובתו של המצביע הנבחר
}

מחיקות

void deleteShow() {
מקבל מהמשתמש מחרוזת עם שם של סדרה.
יהי מצביע שווה חיפוש על ידי  findShow של המחרוזת עם שם זה.
אם מצביע זה == NULL:
משיב Show not found.
מחזיר את הפונקציה.
קורא לפונקציה freeShow(TVShow *show) עם המצביע שלנו (הוא מצביע למצביע, צריך להעביר את המוצבע שלו כדי שיתקבל מצביע לסדרה), וכך לשחרר מהזיכרון את הסדרה הזו (ולפני כן את כל מה שתחתיה).
חזור למסד הנתונים לדרוס אותה: את המוצבע של המצביע שלנו יש לרוקן (NULL). 
קח את כל המשתנים שאחרי המצביע שלה ומשוך אותם אחורה באמצעות לולאה. כל עוד הכתובת הבאה לא מצביעה על NULL:
העתק את הכתובת של הבא לכתובת של הנוכחי.
הפנה לNULL את הכתובת האחרונה.
\\בדוק אם צריך לקצר את DB (אם כפל של השורה והעמודה קטן מריבוע (גודל המאגר – 1). אם כן, shrinkDB.

}


void deleteSeason() {

מקבל שם של עונה (מחרוזת).

}




void deleteEpisode();

שחרורים

void freeEpisode(Episode *e); {
ניגש לפרק הנוכחי. משחרר את שתי המחרוזות name, length ואז את הפרק עצמו (free). 
\\באחריותה של פונקציה הקוראת לפונקציה הזו לשמור מצביע לפרק הבא לפני הקריאה
}

void freeSeason(Season *s); {
ניגש לעונה הנבחרת←פרק. הפרק הזה יישמר בתור "נוכחי". נעתיק ממנו את "הבא" שלו. כל עוד "הבא" אינו NULL:
"שחרר" את "נוכחי" (על ידי הפונקציה freeEpisode).
העתק את המצביע "הבא" אל "נוכחי".
העתק את המצביע הבא (הפרק ש"נוכחי" מצביע עליו) ל"הבא"
חזור לעונה. עכשיו עלינו לשחרר (הפעם free):
את המחרוזת name
את העונה עצמה
\\באחריותה של פונקציה הקוראת לפונקציה הזו לשמור מצביע לעונה הבאה לפני הקריאה
}


void freeShow(TVShow *show) {

ניגש לסדרה הנבחרת←עונה. העונה הזו תישמר בתור "נוכחי". נעתיק ממנה את "הבא" שלה. כל עוד "הבא" אינו NULL:
"שחרר" את "נוכחי" (על ידי הפונקציה הייעודית freeSeason).
העתק את המצביע "הבא" אל "נוכחי".
העתק את המצביע הבא (הפרק ש"נוכחי" מצביע עליו) ל"הבא"
חזור לסדרה. עכשיו שחרר (הפעם free):
את המחרוזת name
את הסדרה עצמה
\\באחריותה של פונקציה הקוראת לפונקציה הזו להבין שעכשיו הסדרה הזו מחוקה, להפוך את המצביע שלה לNULL ולדחוס את המערך בחזרה
}
void freeAll();
